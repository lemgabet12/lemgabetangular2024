"use strict";(self.webpackChunkapp=self.webpackChunkapp||[]).push([[2066],{2066:(w,p,s)=>{s.r(p),s.d(p,{FeedbackPageModule:()=>Z});var b=s(4755),P=s(5030),i=s(626),m=s(2443),h=s(5861),f=s(8053),e=s(3020),v=s(3144),k=s(9953),M=s(6457),x=s(849);const y=["pieCanvas"],O=[{path:"",component:(()=>{class n{RefreshProcedure(){this.createPieChart(),this.createChart(),this.createPieChart1(),this.loadConfig(),this.initializeStorage()}constructor(t,o,r,c,g,a){this.cdr=t,this.http=o,this.hotelservice=r,this.ngZone=c,this.procedurecateg=g,this.storage=a,this.serverUrl="",this.currentDate=new Date,this.Datareserv=[],this.datachambredispo="",this.dataarrdep="",this.datareser="",this.string="",this.Datareser={getwalikingtday:"",getreserve:"",getresanul:""},this.firstday=new Date,this.secondday=new Date,this.thirdday=new Date,this.tomorrow=new Date,this.DataARRDEP={ArrivePrevus:"",Arrive:"",DepartPrevus:"",Depart:""},this.adrese="",this.port="",this.datedep="",this.datefin="",this.isNightMode=!1,this.initializeStorage()}doRefresh(t){setTimeout(()=>{this.createChart(),this.createPieChart(),this.createPieChart1(),t.target.complete()},2e3)}initializeStorage(){var t=this;return(0,h.Z)(function*(){yield t.storage.create()})()}formatDateForService(t){const o=t.split("T")[0].split("-");return`${o[2]}/${o[1]}/${o[0]}`}loadConfig(){var t=this;return(0,h.Z)(function*(){t.serverUrl=localStorage.getItem("urlpub")||"http://default-url",t.port=localStorage.getItem("hotelport")||"default-port"})()}ngOnInit(){var t=this;return(0,h.Z)(function*(){yield t.loadConfig(),t.datedep=(yield t.storage.get("startDate"))||"default-startDate",t.datefin=(yield t.storage.get("endDate"))||"default-endDate",t.createChart(),t.createPieChart(),t.createPieChart1(),t.incrementDate(),t.decrementDate()})()}incrementDate(){const t=new Date(this.currentDate);t.setDate(t.getDate()+1),this.currentDate=t,this.cdr.detectChanges(),console.log("Incremented Date:",this.currentDate),this.createChart(),this.createPieChart(),this.createPieChart1()}decrementDate(){const t=new Date(this.currentDate);t.setDate(t.getDate()-1),this.currentDate=t,this.cdr.detectChanges(),console.log("Decremented Date:",this.currentDate),this.createChart(),this.createPieChart(),this.createPieChart1()}toggleNightMode(){this.isNightMode=!this.isNightMode}readAPI(t){return this.http.get(t)}convertDateFormat(t){const[o,r,c]=t.split("-");return`${c}/${r}/${o}`}createChart(){var t=this;return(0,h.Z)(function*(){const o=t.formatDateForService(t.currentDate.toISOString());t.http.get(`${t.serverUrl}:${t.port}/hotel/getlistpvch?today=${o}`).subscribe(c=>{const g=c.map(l=>l.labelle),a=c.map(l=>l.ca);if(t.chart&&t.chart.destroy(),a.some(l=>0!==l)){const l=document.getElementById("myCh12"),C=l.getContext("2d");if(!C)return void console.error("Unable to get 2D context for canvas");const u=C.createLinearGradient(0,0,0,400);u.addColorStop(0,"rgba(255, 99, 132, 0.5)"),u.addColorStop(1,"rgba(54, 162, 235, 0.5)"),t.chart=new f.kL(l,{type:"bar",data:{labels:g,datasets:[{label:"Point de vente",data:a,backgroundColor:u,borderColor:"rgba(75, 192, 192, 1)",borderWidth:2,borderRadius:12,hoverBorderColor:"#FF6384",hoverBorderWidth:3}]},options:{responsive:!0,scales:{y:{beginAtZero:!0,grid:{color:"rgba(200, 200, 200, 0.3)"},ticks:{font:{size:14,family:"Arial"},color:"#333"}},x:{ticks:{font:{size:14,family:"Arial"},color:"#333"}}},plugins:{legend:{display:!0,position:"top",labels:{font:{size:16,family:"Arial"},color:"#555"}},tooltip:{callbacks:{label:_=>`Revenue: ${_.parsed.y} `},backgroundColor:"rgba(0, 0, 0, 0.7)",titleFont:{size:14},bodyFont:{size:12},padding:10}},animation:{duration:2e3,easing:"easeOutBounce"},hover:{mode:"nearest",intersect:!0}}})}else console.log("Data values are all zero. Chart not created.")},c=>{console.error("Error fetching data:",c)})})()}createPieChart(){const t=this.formatDateForService(this.currentDate.toISOString());this.http.get(`${this.serverUrl}:${this.port}/hotel/getrecap?today=${t}`).subscribe(o=>{const r=o.map(a=>a.type),c=o.map(a=>parseFloat(a.revenu));this.pieChart&&this.pieChart.destroy();const g=document.getElementById("pieChart8");this.pieChart=new f.kL(g,{type:"pie",data:{labels:r,datasets:[{data:c,backgroundColor:["#800000","#ffff00","#90ee90","#87ceeb","#ff6347"],hoverBackgroundColor:["#b30000","#ffff66","#66ff66","#00bfff","#ff3300"]}]},options:{responsive:!0,plugins:{legend:{position:"top"},tooltip:{callbacks:{label:a=>`Revenue: ${a.parsed} `}}}}})},o=>{console.error("Error fetching data for pie chart:",o)})}createPieChart1(){const t=this.formatDateForService(this.currentDate.toISOString());this.http.get(`${this.serverUrl}:${this.port}/hotel/getrecap1?today=${t}`).subscribe(o=>{const r=o.map(a=>a.type2),c=o.map(a=>parseFloat(a.revenu2));this.pieChart1&&this.pieChart1.destroy();const g=document.getElementById("pieChart9");this.pieChart1=new f.kL(g,{type:"pie",data:{labels:r,datasets:[{data:c,backgroundColor:["#008000","#ffa500","#0000ff","#800080","#ff00ff"],hoverBackgroundColor:["#66cc00","#ffcc00","#66ccff","#cc00cc","#ff66ff"]}]},options:{responsive:!0,plugins:{legend:{position:"top"},tooltip:{callbacks:{label:a=>`Revenue: ${a.parsed} `}}}}})},o=>{console.error("Error fetching data for pie chart 1:",o)})}}return n.\u0275fac=function(t){return new(t||n)(e.Y36(e.sBO),e.Y36(v.eN),e.Y36(k.N),e.Y36(e.R0b),e.Y36(M.s),e.Y36(x.K))},n.\u0275cmp=e.Xpm({type:n,selectors:[["app-feedback"]],viewQuery:function(t,o){if(1&t&&e.Gf(y,5),2&t){let r;e.iGM(r=e.CRH())&&(o.pieCanvas=r.first)}},decls:37,vars:4,consts:[[1,"ion-no-border"],[2,"text-align","center"],["slot","end",2,"display","flex","justify-content","center","align-items","center"],[2,"font-size","7px",3,"click"],["name","chevron-back-outline"],[2,"display","flex","justify-content","center","align-items","center","color","black","font-family","'Lucida Sans', 'Lucida Sans Regular', 'Lucida Grande', 'Lucida Sans Unicode', Geneva, Verdana, sans-serif","margin","6%"],["name","chevron-forward-outline"],["slot","end"],[1,"refresh-button",3,"click"],["loading","lazy","src","../../../assets/icon/arrows-rotate-solid.svg","alt","refresh"],[1,"night-mode"],["slot","fixed",2,"margin-top","15%",3,"ionRefresh"],["slot","fixed","pullingIcon","arrow-dropdown","pullingText","Pull to refresh","refreshingSpinner","bubbles","refreshingText","Refreshing..."],[2,"overflow-x","auto","margin-top","14%"],[1,"tablette",2,"overflow-x","auto"],[2,"overflow-x","auto"],[2,"opacity","1","margin-top","7%","overflow-x","auto"],[1,"bg-white","text-center","text-dark",2,"font-size","20px"],[2,"background-color","white","color","black","text-align","center","margin","3%","overflow-x","auto"],["width","200px","height","200px","id","myCh12",2,"overflow-x","auto"],[1,"bg-white","text-center","text-dark",2,"font-size","20px","text-align","center","color","black"],[2,"background-color","white","overflow-x","auto"],["id","pieChart8",2,"margin-top","3%","background-color","white","overflow-x","auto"],["id","pieChart9",2,"margin-top","3%","margin-bottom","10%","background-color","white","overflow-x","auto"]],template:function(t,o){1&t&&(e.TgZ(0,"ion-header",0)(1,"ion-toolbar"),e._UZ(2,"ion-title",1),e.TgZ(3,"ion-buttons",2)(4,"ion-button",3),e.NdJ("click",function(){return o.decrementDate()}),e._UZ(5,"ion-icon",4),e.qZA(),e.TgZ(6,"p",5),e._uU(7),e.ALo(8,"date"),e.qZA(),e.TgZ(9,"ion-button",3),e.NdJ("click",function(){return o.incrementDate()}),e._UZ(10,"ion-icon",6),e.qZA()(),e.TgZ(11,"ion-buttons",7)(12,"ion-button",8),e.NdJ("click",function(){return o.RefreshProcedure()}),e._UZ(13,"img",9),e.qZA()()()(),e.TgZ(14,"ion-content",10)(15,"ion-refresher",11),e.NdJ("ionRefresh",function(c){return o.doRefresh(c)}),e._UZ(16,"ion-refresher-content",12),e.qZA(),e._UZ(17,"ion-card",13),e.TgZ(18,"ion-grid",14)(19,"ion-row",15)(20,"ion-col",16)(21,"div",15)(22,"h1",17),e._uU(23,"Chiffre d'affaire PV"),e.qZA(),e.TgZ(24,"div",18)(25,"ion-card",15),e._UZ(26,"canvas",19),e.qZA()(),e.TgZ(27,"h1",20),e._uU(28,"Chiffre d'affaire global"),e.qZA(),e.TgZ(29,"h2",20),e._uU(30,"Cumul du mois"),e.qZA(),e.TgZ(31,"div",21),e._UZ(32,"canvas",22),e.qZA(),e.TgZ(33,"h2",20),e._uU(34,"Cumul de l'ann\xe9e"),e.qZA(),e.TgZ(35,"div",21),e._UZ(36,"canvas",23),e.qZA()()()()()()),2&t&&(e.xp6(7),e.hij(" ",e.xi3(8,1,o.currentDate,"dd/MM/yyyy")," "))},dependencies:[i.YG,i.Sm,i.PM,i.wI,i.W2,i.jY,i.Gu,i.gu,i.nJ,i.Wo,i.Nd,i.wd,i.sr,b.uU],styles:["ion-toolbar[_ngcontent-%COMP%]{--background: white}ion-title[_ngcontent-%COMP%]{font-size:20px;font-family:WorkSans-Bold;color:var(--color-darkText)}ion-title.md[_ngcontent-%COMP%]{text-align:center;margin-left:48px}ion-toolbar[_ngcontent-%COMP%]{--background: rgb(252, 252, 252)}@media (prefers-color-scheme: dark){ion-toolbar[_ngcontent-%COMP%]{--background: var(--ion-background-color)}}ion-toolbar[_ngcontent-%COMP%]{position:fixed}ion-list[_ngcontent-%COMP%]{padding-top:56px}.md[_ngcontent-%COMP%]   ion-toolbar[_ngcontent-%COMP%]{--padding-top: var(--status-bar-height)}ion-title[_ngcontent-%COMP%]{font-size:22px;font-family:WorkSans-Bold;color:var(--color-darkText)}ion-title.md[_ngcontent-%COMP%]{margin-left:48px}ion-col[_ngcontent-%COMP%]{border:1px black solid}ion-item[_ngcontent-%COMP%]{--padding-end: 0px;--inner-padding-end: 0px}ion-item[_ngcontent-%COMP%]   ion-img[_ngcontent-%COMP%]{aspect-ratio:1.5;object-fit:cover}ion-item[_ngcontent-%COMP%]   .sc1[_ngcontent-%COMP%]{display:flex;flex-wrap:nowrap}ion-item[_ngcontent-%COMP%]   ion-row[_ngcontent-%COMP%]{border:1px solid black}.hidden[_ngcontent-%COMP%]{display:none}.Pax[_ngcontent-%COMP%]{color:green}.Chambre[_ngcontent-%COMP%]{color:red}.material-icons.darkgrey[_ngcontent-%COMP%]{color:var(--color-darkgrey)}table[_ngcontent-%COMP%]{border-collapse:collapse;border-spacing:0;width:100%;border:1px solid #ddd;background-color:#fffc}.refrech-button[_ngcontent-%COMP%]{--background: white}th[_ngcontent-%COMP%], td[_ngcontent-%COMP%]{text-align:left;padding:4px;border:1px solid #ddd;font-size:11px}th[_ngcontent-%COMP%]{background-color:#f2f2f2;font-size:9px}.table-title[_ngcontent-%COMP%]{text-align:center;margin-top:20px;font-size:1.5em;color:#fff}.table-description[_ngcontent-%COMP%]{text-align:left;font-size:1em;color:#eee}tr[_ngcontent-%COMP%]:nth-child(even){background-color:#f2f2f2}.night-mode[_ngcontent-%COMP%]   ion-toolbar[_ngcontent-%COMP%]{background-color:#333;color:#fff}.night-mode[_ngcontent-%COMP%]   .background[_ngcontent-%COMP%]{background-color:#222}.night-mode[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%], .night-mode[_ngcontent-%COMP%]   table[_ngcontent-%COMP%]{color:#fff}.night-mode[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]{background-color:#444}.night-mode[_ngcontent-%COMP%]   .chart-container[_ngcontent-%COMP%]{background-color:#333}.night-mode[_ngcontent-%COMP%]   canvas[_ngcontent-%COMP%]{border:1px solid #fff}@media only screen and (max-width: 1024px){.tablette[_ngcontent-%COMP%]{margin-top:10%}}@media only screen and (max-width: 768px){.tablette[_ngcontent-%COMP%]{margin-top:19%}}.special-row-2[_ngcontent-%COMP%]{background-color:#add8e6}.special-row-4[_ngcontent-%COMP%]{background-color:#90ee90}"]}),n})()}];let D=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=e.oAB({type:n}),n.\u0275inj=e.cJS({imports:[m.Bz.forChild(O),m.Bz]}),n})(),Z=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=e.oAB({type:n}),n.\u0275inj=e.cJS({imports:[b.ez,P.u5,i.Pc,D]}),n})()}}]);