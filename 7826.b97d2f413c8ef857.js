"use strict";(self.webpackChunkapp=self.webpackChunkapp||[]).push([[7826],{7826:(j,h,l)=>{l.r(h),l.d(h,{RegisterPageModule:()=>w});var u=l(4755),a=l(5030),g=l(626),v=l(2443),c=l(5861),e=l(3020),Z=l(3144),M=l(849);function x(n,r){if(1&n&&(e.TgZ(0,"div",26),e._uU(1),e.qZA()),2&n){const t=e.oxw();e.xp6(1),e.hij(" ",t.errorMessage," ")}}function T(n,r){1&n&&(e.TgZ(0,"div"),e._uU(1,"Nom est incorrect."),e.qZA())}function A(n,r){if(1&n&&(e.TgZ(0,"div",27),e.YNc(1,T,2,0,"div",28),e.qZA()),2&n){e.oxw();const t=e.MAs(12);e.xp6(1),e.Q6J("ngIf",null==t.errors?null:t.errors.required)}}function P(n,r){1&n&&(e.TgZ(0,"div"),e._uU(1,"Prenom is required."),e.qZA())}function C(n,r){if(1&n&&(e.TgZ(0,"div",27),e.YNc(1,P,2,0,"div",28),e.qZA()),2&n){e.oxw();const t=e.MAs(18);e.xp6(1),e.Q6J("ngIf",null==t.errors?null:t.errors.required)}}function q(n,r){if(1&n&&(e.TgZ(0,"ion-select-option",29),e._uU(1),e.qZA()),2&n){const t=r.$implicit;e.Q6J("value",t.name),e.xp6(1),e.Oqu(t.name)}}function R(n,r){1&n&&(e.TgZ(0,"div"),e._uU(1,"Role est incorrect."),e.qZA())}function b(n,r){if(1&n&&(e.TgZ(0,"div",27),e.YNc(1,R,2,0,"div",28),e.qZA()),2&n){e.oxw();const t=e.MAs(24);e.xp6(1),e.Q6J("ngIf",null==t.errors?null:t.errors.required)}}function J(n,r){if(1&n&&(e.TgZ(0,"ion-select-option",29),e._uU(1),e.qZA()),2&n){const t=r.$implicit;e.Q6J("value",t.cityName),e.xp6(1),e.Oqu(t.cityName)}}function U(n,r){1&n&&(e.TgZ(0,"div"),e._uU(1,"Code Paye est incorrect."),e.qZA())}function N(n,r){if(1&n&&(e.TgZ(0,"div",27),e.YNc(1,U,2,0,"div",28),e.qZA()),2&n){e.oxw();const t=e.MAs(31);e.xp6(1),e.Q6J("ngIf",null==t.errors?null:t.errors.required)}}function y(n,r){1&n&&(e.TgZ(0,"div"),e._uU(1,"Telephone est incorrect."),e.qZA())}function Q(n,r){1&n&&(e.TgZ(0,"div"),e._uU(1,"Telephone doit \xeatre numeric."),e.qZA())}function I(n,r){1&n&&(e.TgZ(0,"div"),e._uU(1,"Telephone doit \xeatre 8 num\xe9ro."),e.qZA())}function Y(n,r){if(1&n&&(e.TgZ(0,"div",27),e.YNc(1,y,2,0,"div",28),e.YNc(2,Q,2,0,"div",28),e.YNc(3,I,2,0,"div",28),e.qZA()),2&n){e.oxw();const t=e.MAs(38);e.xp6(1),e.Q6J("ngIf",null==t.errors?null:t.errors.required),e.xp6(1),e.Q6J("ngIf",null==t.errors?null:t.errors.pattern),e.xp6(1),e.Q6J("ngIf",null==t.errors?null:t.errors.maxlength)}}function O(n,r){1&n&&(e.TgZ(0,"div"),e._uU(1,"Email est incorrect."),e.qZA())}function D(n,r){1&n&&(e.TgZ(0,"div"),e._uU(1,"Invalid email format. doit contien"),e.qZA())}function E(n,r){if(1&n&&(e.TgZ(0,"div",27),e.YNc(1,O,2,0,"div",28),e.YNc(2,D,2,0,"div",28),e.qZA()),2&n){e.oxw();const t=e.MAs(44);e.xp6(1),e.Q6J("ngIf",null==t.errors?null:t.errors.required),e.xp6(1),e.Q6J("ngIf",null==t.errors?null:t.errors.pattern)}}function F(n,r){1&n&&(e.TgZ(0,"div"),e._uU(1,"Nomdehotel est incorrect."),e.qZA())}function $(n,r){if(1&n&&(e.TgZ(0,"div",27),e.YNc(1,F,2,0,"div",28),e.qZA()),2&n){e.oxw();const t=e.MAs(50);e.xp6(1),e.Q6J("ngIf",null==t.errors?null:t.errors.required)}}const z=[{path:"",component:(()=>{class n{constructor(t,i,o){this.http=t,this.navCtrl=i,this.storage=o,this.userData={nom:"",prenom:"",role:"",cityName:"",telephone:"",email:"",nomdehotel:""},this.roles=[],this.codCities=[],this.errorMessage="",this.existingUsers=[],this.serverUrl="",this.port=""}ngOnInit(){var t=this;return(0,c.Z)(function*(){yield t.storage.create(),t.serverUrl=(yield t.storage.get("serverUrl"))||"http://192.168.3.9",t.port=(yield t.storage.get("port"))||"8050",t.fetchRoles(),t.fetchCodCities(),t.fetchExistingUsers()})()}loadConfig(){var t=this;return(0,c.Z)(function*(){t.serverUrl=localStorage.getItem("urlpub")||"http://default-url",t.port=localStorage.getItem("hotelport")||"default-port"})()}fetchRoles(){var t=this;return(0,c.Z)(function*(){t.http.get(`${t.serverUrl}:${t.port}/api/insmob/roles`).subscribe(o=>{t.roles=o,console.log("Fetched roles:",t.roles)},o=>console.error("Error fetching roles:",o))})()}fetchCodCities(){var t=this;return(0,c.Z)(function*(){t.http.get(`${t.serverUrl}:${t.port}/api/insmob/all`).subscribe(o=>{t.codCities=o,console.log("Fetched codCities:",t.codCities)},o=>console.error("Error fetching codCities:",o))})()}fetchExistingUsers(){var t=this;return(0,c.Z)(function*(){t.http.get(`${t.serverUrl}:${t.port}/hotel/getlistuser`).subscribe(o=>{t.existingUsers=o,console.log("Fetched existing users:",t.existingUsers)},o=>console.error("Error fetching existing users:",o))})()}emailExists(t){return this.existingUsers.some(i=>i.email===t)}telephoneExists(t){return this.existingUsers.some(i=>i.telephone===t)}onSubmit(){var t=this;return(0,c.Z)(function*(){const i=`${t.userData.cityName}${t.userData.telephone}`;if(t.emailExists(t.userData.email))return void(t.errorMessage="L'adresse e-mail existe d\xe9j\xe0. Veuillez en utiliser une autre.");if(t.telephoneExists(i))return void(t.errorMessage="Le num\xe9ro de t\xe9l\xe9phone existe d\xe9j\xe0. Veuillez en utiliser un autre.");const o={...t.userData,telephone:i};t.http.post(`${t.serverUrl}:${t.port}/api/insmob/register`,o).subscribe(d=>{console.log("User registered successfully:",d),t.navCtrl.navigateRoot("/login")},d=>{console.error("Error registering user:",d),t.errorMessage="Erreur lors de l'enregistrement. Veuillez r\xe9essayer."})})()}routlogin(){this.navCtrl.navigateForward("/login")}}return n.\u0275fac=function(t){return new(t||n)(e.Y36(Z.eN),e.Y36(g.SH),e.Y36(M.K))},n.\u0275cmp=e.Xpm({type:n,selectors:[["app-register"]],decls:57,vars:17,consts:[[1,"register-background"],[1,"ion-padding","form-container"],[1,"ion-text-center"],[3,"ngSubmit"],["registerForm","ngForm"],["class","ion-padding alert alert-danger",4,"ngIf"],["lines","none",1,"custom-item"],["position","floating"],["type","text","name","nom","required","",3,"ngModel","ngModelChange"],["nom","ngModel"],["class","text-danger",4,"ngIf"],["type","text","name","prenom","required","",3,"ngModel","ngModelChange"],["prenom","ngModel"],["name","role","interface","action-sheet","required","",3,"ngModel","ngModelChange"],["role","ngModel"],[3,"value",4,"ngFor","ngForOf"],["name","codCity","interface","action-sheet","required","",3,"ngModel","ngModelChange"],["codCity","ngModel"],["type","tel","name","telephone","required","","pattern","[0-9]*","maxlength","8",3,"ngModel","ngModelChange"],["telephone","ngModel"],["type","email","name","email","required","","pattern","^[a-zA-Z0-9._%+-]+@[a-zA-Z0-9.-]+\\.[a-zA-Z]{2,4}$",3,"ngModel","ngModelChange"],["email","ngModel"],["type","text","name","nomdehotel","required","",3,"ngModel","ngModelChange"],["nomdehotel","ngModel"],["type","submit","expand","block",1,"custom-button"],["expand","block","fill","outline",1,"custom-button",3,"click"],[1,"ion-padding","alert","alert-danger"],[1,"text-danger"],[4,"ngIf"],[3,"value"]],template:function(t,i){if(1&t&&(e.TgZ(0,"ion-content",0)(1,"div",1)(2,"div",2)(3,"h2"),e._uU(4,"Register"),e.qZA()(),e.TgZ(5,"form",3,4),e.NdJ("ngSubmit",function(){return i.onSubmit()}),e.YNc(7,x,2,1,"div",5),e.TgZ(8,"ion-item",6)(9,"ion-label",7),e._uU(10,"Nom"),e.qZA(),e.TgZ(11,"ion-input",8,9),e.NdJ("ngModelChange",function(s){return i.userData.nom=s}),e.qZA(),e.YNc(13,A,2,1,"div",10),e.qZA(),e.TgZ(14,"ion-item",6)(15,"ion-label",7),e._uU(16,"Prenom"),e.qZA(),e.TgZ(17,"ion-input",11,12),e.NdJ("ngModelChange",function(s){return i.userData.prenom=s}),e.qZA(),e.YNc(19,C,2,1,"div",10),e.qZA(),e.TgZ(20,"ion-item",6)(21,"ion-label",7),e._uU(22,"Role"),e.qZA(),e.TgZ(23,"ion-select",13,14),e.NdJ("ngModelChange",function(s){return i.userData.role=s}),e.YNc(25,q,2,2,"ion-select-option",15),e.qZA(),e.YNc(26,b,2,1,"div",10),e.qZA(),e.TgZ(27,"ion-item",6)(28,"ion-label",7),e._uU(29,"Code Paye"),e.qZA(),e.TgZ(30,"ion-select",16,17),e.NdJ("ngModelChange",function(s){return i.userData.cityName=s}),e.YNc(32,J,2,2,"ion-select-option",15),e.qZA(),e.YNc(33,N,2,1,"div",10),e.qZA(),e.TgZ(34,"ion-item",6)(35,"ion-label",7),e._uU(36,"Telephone"),e.qZA(),e.TgZ(37,"ion-input",18,19),e.NdJ("ngModelChange",function(s){return i.userData.telephone=s}),e.qZA(),e.YNc(39,Y,4,3,"div",10),e.qZA(),e.TgZ(40,"ion-item",6)(41,"ion-label",7),e._uU(42,"Email"),e.qZA(),e.TgZ(43,"ion-input",20,21),e.NdJ("ngModelChange",function(s){return i.userData.email=s}),e.qZA(),e.YNc(45,E,3,2,"div",10),e.qZA(),e.TgZ(46,"ion-item",6)(47,"ion-label",7),e._uU(48,"Nom de hotel"),e.qZA(),e.TgZ(49,"ion-input",22,23),e.NdJ("ngModelChange",function(s){return i.userData.nomdehotel=s}),e.qZA(),e.YNc(51,$,2,1,"div",10),e.qZA(),e.TgZ(52,"div",2)(53,"ion-button",24),e._uU(54,"Register"),e.qZA(),e.TgZ(55,"ion-button",25),e.NdJ("click",function(){return i.routlogin()}),e._uU(56,"Connecter"),e.qZA()()()()()),2&t){const o=e.MAs(12),s=e.MAs(18),d=e.MAs(24),p=e.MAs(31),_=e.MAs(38),m=e.MAs(44),f=e.MAs(50);e.xp6(7),e.Q6J("ngIf",i.errorMessage),e.xp6(4),e.Q6J("ngModel",i.userData.nom),e.xp6(2),e.Q6J("ngIf",o.invalid&&(o.dirty||o.touched)),e.xp6(4),e.Q6J("ngModel",i.userData.prenom),e.xp6(2),e.Q6J("ngIf",s.invalid&&(s.dirty||s.touched)),e.xp6(4),e.Q6J("ngModel",i.userData.role),e.xp6(2),e.Q6J("ngForOf",i.roles),e.xp6(1),e.Q6J("ngIf",d.invalid&&(d.dirty||d.touched)),e.xp6(4),e.Q6J("ngModel",i.userData.cityName),e.xp6(2),e.Q6J("ngForOf",i.codCities),e.xp6(1),e.Q6J("ngIf",p.invalid&&(p.dirty||p.touched)),e.xp6(4),e.Q6J("ngModel",i.userData.telephone),e.xp6(2),e.Q6J("ngIf",_.invalid&&(_.dirty||_.touched)),e.xp6(4),e.Q6J("ngModel",i.userData.email),e.xp6(2),e.Q6J("ngIf",m.invalid&&(m.dirty||m.touched)),e.xp6(4),e.Q6J("ngModel",i.userData.nomdehotel),e.xp6(2),e.Q6J("ngIf",f.invalid&&(f.dirty||f.touched))}},dependencies:[u.sg,u.O5,a._Y,a.JJ,a.JL,a.Q7,a.nD,a.c5,a.On,a.F,g.YG,g.W2,g.pK,g.Ie,g.Q$,g.t9,g.n0,g.QI,g.j9],styles:["page-register[_ngcontent-%COMP%]   .register-background[_ngcontent-%COMP%]{background:linear-gradient(rgba(255,165,0,.8),rgba(255,165,0,.8)),url(cover.711d04df7493f8aa.png) no-repeat center center/cover;height:100vh;display:flex;justify-content:center;align-items:center;padding:0 20px}page-register[_ngcontent-%COMP%]   .register-form[_ngcontent-%COMP%]{max-width:400px;width:100%;background-color:#ffffffe6;border-radius:10px;padding:20px;box-shadow:0 0 20px #0000001a}page-register[_ngcontent-%COMP%]   .register-form[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{color:#007bff;margin-bottom:20px;text-align:center}page-register[_ngcontent-%COMP%]   .validation-message[_ngcontent-%COMP%]{font-size:.8em;color:#dc3545;margin-top:5px}page-register[_ngcontent-%COMP%]   .error-message[_ngcontent-%COMP%]{font-size:.9em;color:#dc3545;margin-top:20px;text-align:center}page-register[_ngcontent-%COMP%]   ion-button[_ngcontent-%COMP%]{--background: #007bff;--border-radius: 5px;font-weight:700;margin-top:20px}page-register[_ngcontent-%COMP%]   ion-button[_ngcontent-%COMP%]:hover{--background: #0056b3}"]}),n})()}];let S=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=e.oAB({type:n}),n.\u0275inj=e.cJS({imports:[v.Bz.forChild(z),v.Bz]}),n})(),w=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=e.oAB({type:n}),n.\u0275inj=e.cJS({imports:[u.ez,a.u5,g.Pc,S]}),n})()}}]);